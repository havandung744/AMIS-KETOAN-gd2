{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  props: [\"employeeCodeForDelete\", \"employeeIdSelected\"],\n\n  data() {\n    return {\n      employees: {},\n      employee: {}\n    };\n  },\n\n  watch: {\n    employeeIdSelected: function (value) {\n      // kiểm tra xem id có tồn tại hay không\n      var me = this;\n\n      if (value) {\n        axios.get(`http://localhost:22454/api/v1/Employees/${me.employeeIdSelected}`).then(function (res) {\n          switch (res.status) {\n            case 200:\n              console.log(\"ok\"); // thực hiện focus vào ô nhập liệu đầu tiên\n\n              document.getElementById(\"EmployeeCode\").focus(); // gán lại data cho employee detail\n\n              me.employee = res.data;\n              console.log(me.employee);\n              me.employee.DateOfBirth = me.formatDate(me.employee.DateOfBirth); //gán lại ngày cấp cho employee detail\n\n              me.employee.IdentityDate = me.formatDate(me.employee.IdentityDate);\n              break;\n\n            case 201:\n              break;\n\n            default:\n              break;\n          }\n        }).catch(function (res) {\n          console.log(res);\n        });\n      } else {\n        me.getNewEmployeeCode();\n      }\n    }\n  },\n  methods: {\n    async btnOnDelete() {\n      //1. validate dữ liệu\n      var arrayErrors = [];\n      arrayErrors.push(`Bạn có muốn xóa Nhân viên &#60;${this.employeeCodeForDelete}&#62; không ?`); //hiển thị thông báo validate không hợp lệ\n\n      let noticeDialog = document.getElementsByClassName(\"d-dialog-box-delete\")[0];\n      let bodyTextNoticeDialog = noticeDialog.querySelector(\".d-dialog-box-delete .d-dialog-body\");\n      bodyTextNoticeDialog.innerHTML = \"\"; //append nội dung thông báo\n\n      arrayErrors.forEach(errorMsg => {\n        var el = document.createElement(\"div\");\n        el.innerHTML = `${errorMsg}`;\n        bodyTextNoticeDialog.append(el);\n      });\n      document.getElementsByClassName(\"d-dialog-box-delete\")[0].style.display = \"block\";\n      document.getElementsByClassName(\"d-dialog-box-delete\")[0].style.display = \"block\"; // ẩn form dropdown\n\n      this.$emit(\"isShowDropDown\"); // document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\n    },\n\n    btnOnReplication() {\n      var me = this; //ẩn form dialogDelete\n\n      document.getElementsByClassName(\"dropdown\")[0].style.display = \"none\"; // hiển thị form detail\n\n      me.$emit(\"isShowDialog\"); // thực hiện lấy mã nhân viên mới\n      // me.getNewEmployeeCode();\n    },\n\n    btnOnStopUsing() {\n      let noticeDialog = document.getElementsByClassName(\"d-dialog-box\")[0];\n      let bodyTextNoticeDialog = noticeDialog.querySelector(\".d-dialog-body\");\n      bodyTextNoticeDialog.innerHTML = \"Chức năng đang phát triển !\"; // hiển thị form notice\n\n      document.getElementsByClassName(\"d-dialog-box\")[0].style.display = \"block\"; //ẩn form dialogDelete\n\n      document.getElementsByClassName(\"dropdown\")[0].style.display = \"none\";\n    },\n\n    /**\r\n    * Thực hiện lấy mã nhân viên mới\r\n    * Author: HVDUNG (24/06/2022)\r\n    */\n    async getNewEmployeeCode() {\n      try {\n        var me = this; // nếu không có id thì gán lại employee là null\n\n        me.employee = {}; // gọi API lấy mã nhân viên\n\n        await axios.get(\"http://localhost:22454/api/v1/Employees/NewEmployeeCode\").then(function (res) {\n          me.employee.EmployeeCode = res.data; // thực hiện focus vào ô nhập liệu đầu tiên\n\n          document.getElementById(\"EmployeeCode\").focus();\n        }).catch(function (res) {\n          console.log(res);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    /**\r\n    * Thực hiện format lại ngày tháng để có thể hiển thị được trên form detail\r\n    * Author: HVDUNG (03/06/2022)\r\n    */\n    formatDate(dateOfBirth) {\n      if (dateOfBirth) {\n        // chuyển từ dạng string sang dạng Date\n        dateOfBirth = new Date(dateOfBirth); // lấy ngày\n\n        let date = dateOfBirth.getDate(); // lấy tháng\n\n        let month = dateOfBirth.getMonth() + 1; // lấy năm\n\n        let year = dateOfBirth.getFullYear(); // thêm số 0 vào trước nếu chỉ có một kí tự\n\n        date = date < 10 ? `0${date}` : date;\n        month = month < 10 ? `0${month}` : month;\n        return `${year}-${month}-${date}`;\n      } else {\n        return \"\";\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAgBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACbC,KAAK,EAAE,CAAC,uBAAD,EAA0B,oBAA1B,CADM;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,SAAS,EAAE,EADN;MAELC,QAAQ,EAAE;IAFL,CAAP;EAID,CAPY;;EAQbC,KAAK,EAAC;IACHC,kBAAkB,EAAE,UAAUC,KAAV,EAAiB;MACpC;MACA,IAAIC,EAAC,GAAI,IAAT;;MACA,IAAID,KAAJ,EAAW;QACTP,KAAI,CACDS,GADH,CAEK,2CAA0CD,EAAE,CAACF,kBAAmB,EAFrE,EAIGI,IAJH,CAIQ,UAAUC,GAAV,EAAe;UACnB,QAAQA,GAAG,CAACC,MAAZ;YACE,KAAK,GAAL;cACEC,OAAO,CAACC,GAAR,CAAY,IAAZ,EADF,CAEE;;cACAC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,GAHF,CAIE;;cACAT,EAAE,CAACJ,QAAH,GAAcO,GAAG,CAACT,IAAlB;cACAW,OAAO,CAACC,GAAR,CAAYN,EAAE,CAACJ,QAAf;cACAI,EAAE,CAACJ,QAAH,CAAYc,WAAZ,GAA0BV,EAAE,CAACW,UAAH,CACxBX,EAAE,CAACJ,QAAH,CAAYc,WADY,CAA1B,CAPF,CAUE;;cACAV,EAAE,CAACJ,QAAH,CAAYgB,YAAZ,GAA2BZ,EAAE,CAACW,UAAH,CACzBX,EAAE,CAACJ,QAAH,CAAYgB,YADa,CAA3B;cAGA;;YACF,KAAK,GAAL;cACE;;YAEF;cACE;UApBJ;QAsBD,CA3BH,EA4BGC,KA5BH,CA4BS,UAAUV,GAAV,EAAe;UACpBE,OAAO,CAACC,GAAR,CAAYH,GAAZ;QACD,CA9BH;MAgCF,CAjCA,MAiCO;QACLH,EAAE,CAACc,kBAAH;MACF;IACD;EAxCG,CARO;EAkDbC,OAAO,EAAE;IACP,MAAMC,WAAN,GAAoB;MAClB;MACA,IAAIC,WAAU,GAAI,EAAlB;MACAA,WAAW,CAACC,IAAZ,CAAkB,kCAAiC,KAAKC,qBAAsB,eAA9E,EAHkB,CAIlB;;MACA,IAAIC,YAAW,GAAIb,QAAQ,CAACc,sBAAT,CAAgC,qBAAhC,EAAuD,CAAvD,CAAnB;MACA,IAAIC,oBAAmB,GAAIF,YAAY,CAACG,aAAb,CAA2B,qCAA3B,CAA3B;MACAD,oBAAoB,CAACE,SAArB,GAAiC,EAAjC,CAPkB,CAQlB;;MACAP,WAAW,CAACQ,OAAZ,CAAqBC,QAAD,IAAc;QAChC,IAAIC,EAAC,GAAIpB,QAAQ,CAACqB,aAAT,CAAuB,KAAvB,CAAT;QACAD,EAAE,CAACH,SAAH,GAAgB,GAAEE,QAAS,EAA3B;QACAJ,oBAAoB,CAACO,MAArB,CAA4BF,EAA5B;MACD,CAJD;MAKApB,QAAQ,CAACc,sBAAT,CAAgC,qBAAhC,EAAuD,CAAvD,EAA0DS,KAA1D,CAAgEC,OAAhE,GACE,OADF;MAEAxB,QAAQ,CAACc,sBAAT,CAAgC,qBAAhC,EAAuD,CAAvD,EAA0DS,KAA1D,CAAgEC,OAAhE,GACE,OADF,CAhBkB,CAkBlB;;MACA,KAAKC,KAAL,CAAW,gBAAX,EAnBkB,CAoBlB;IACD,CAtBM;;IAwBPC,gBAAgB,GAAG;MACjB,IAAIjC,EAAC,GAAI,IAAT,CADiB,CAEjB;;MACAO,QAAQ,CAACc,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+CS,KAA/C,CAAqDC,OAArD,GAA+D,MAA/D,CAHiB,CAIjB;;MACA/B,EAAE,CAACgC,KAAH,CAAS,cAAT,EALiB,CAMjB;MACA;IAED,CAjCM;;IAmCPE,cAAc,GAAE;MACb,IAAId,YAAW,GAAIb,QAAQ,CAACc,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,CAAnB;MACD,IAAIC,oBAAmB,GAAIF,YAAY,CAACG,aAAb,CAA2B,gBAA3B,CAA3B;MACAD,oBAAoB,CAACE,SAArB,GAAiC,6BAAjC,CAHc,CAId;;MACAjB,QAAQ,CAACc,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDS,KAAnD,CAAyDC,OAAzD,GACE,OADF,CALc,CAOd;;MACAxB,QAAQ,CAACc,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+CS,KAA/C,CAAqDC,OAArD,GAA+D,MAA/D;IACD,CA5CM;;IA8CN;;;;IAID,MAAMjB,kBAAN,GAA2B;MACzB,IAAI;QACF,IAAId,EAAC,GAAI,IAAT,CADE,CAEF;;QACAA,EAAE,CAACJ,QAAH,GAAc,EAAd,CAHE,CAIF;;QACA,MAAMJ,KAAI,CACPS,GADG,CACC,yDADD,EAEHC,IAFG,CAEE,UAAUC,GAAV,EAAe;UACnBH,EAAE,CAACJ,QAAH,CAAYuC,YAAZ,GAA2BhC,GAAG,CAACT,IAA/B,CADmB,CAEnB;;UACAa,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC;QACD,CANG,EAOHI,KAPG,CAOG,UAAUV,GAAV,EAAe;UACpBE,OAAO,CAACC,GAAR,CAAYH,GAAZ;QACD,CATG,CAAN;MAUF,CAfA,CAeE,OAAOiC,KAAP,EAAc;QACd/B,OAAO,CAACC,GAAR,CAAY8B,KAAZ;MACF;IACD,CArEM;;IAsEN;;;;IAIDzB,UAAU,CAAC0B,WAAD,EAAc;MACtB,IAAIA,WAAJ,EAAiB;QACf;QACAA,WAAU,GAAI,IAAIC,IAAJ,CAASD,WAAT,CAAd,CAFe,CAGf;;QACA,IAAIE,IAAG,GAAIF,WAAW,CAACG,OAAZ,EAAX,CAJe,CAKf;;QACA,IAAIC,KAAI,GAAIJ,WAAW,CAACK,QAAZ,KAAyB,CAArC,CANe,CAOf;;QACA,IAAIC,IAAG,GAAIN,WAAW,CAACO,WAAZ,EAAX,CARe,CASf;;QACAL,IAAG,GAAIA,IAAG,GAAI,EAAP,GAAa,IAAGA,IAAK,EAArB,GAAyBA,IAAhC;QACAE,KAAI,GAAIA,KAAI,GAAI,EAAR,GAAc,IAAGA,KAAM,EAAvB,GAA2BA,KAAnC;QACA,OAAQ,GAAEE,IAAK,IAAGF,KAAM,IAAGF,IAAK,EAAhC;MACF,CAbA,MAaO;QACL,OAAO,EAAP;MACF;IACD;;EA3FM;AAlDI,CAAf","names":["axios","props","data","employees","employee","watch","employeeIdSelected","value","me","get","then","res","status","console","log","document","getElementById","focus","DateOfBirth","formatDate","IdentityDate","catch","getNewEmployeeCode","methods","btnOnDelete","arrayErrors","push","employeeCodeForDelete","noticeDialog","getElementsByClassName","bodyTextNoticeDialog","querySelector","innerHTML","forEach","errorMsg","el","createElement","append","style","display","$emit","btnOnReplication","btnOnStopUsing","EmployeeCode","error","dateOfBirth","Date","date","getDate","month","getMonth","year","getFullYear"],"sourceRoot":"","sources":["C:\\Users\\hdung\\source\\repos\\web2022_04\\Vue\\amis-ketoan\\src\\components\\page\\DropDownList.vue"],"sourcesContent":["<template>\r\n  <div class=\"dropdown\">\r\n    <div>\r\n      <button @click=\"btnOnReplication\">Nhân bản</button>\r\n    </div>\r\n    <div>\r\n      <button @click=\"btnOnDelete\">Xóa</button>\r\n    </div>\r\n    <div>\r\n      <button @click=\"btnOnStopUsing\">Ngừng sử dụng</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios\";\r\nexport default {\r\n  props: [\"employeeCodeForDelete\", \"employeeIdSelected\"],\r\n  data() {\r\n    return {\r\n      employees: {},\r\n      employee: {}\r\n    };\r\n  },\r\n  watch:{\r\n     employeeIdSelected: function (value) {\r\n      // kiểm tra xem id có tồn tại hay không\r\n      var me = this;\r\n      if (value) {\r\n        axios\r\n          .get(\r\n            `http://localhost:22454/api/v1/Employees/${me.employeeIdSelected}`\r\n          )\r\n          .then(function (res) {\r\n            switch (res.status) {\r\n              case 200:\r\n                console.log(\"ok\");\r\n                // thực hiện focus vào ô nhập liệu đầu tiên\r\n                document.getElementById(\"EmployeeCode\").focus();\r\n                // gán lại data cho employee detail\r\n                me.employee = res.data;\r\n                console.log(me.employee);\r\n                me.employee.DateOfBirth = me.formatDate(\r\n                  me.employee.DateOfBirth\r\n                );\r\n                //gán lại ngày cấp cho employee detail\r\n                me.employee.IdentityDate = me.formatDate(\r\n                  me.employee.IdentityDate\r\n                );\r\n                break;\r\n              case 201:\r\n                break;\r\n\r\n              default:\r\n                break;\r\n            }\r\n          })\r\n          .catch(function (res) {\r\n            console.log(res);\r\n          });\r\n\r\n      } else {\r\n        me.getNewEmployeeCode();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    async btnOnDelete() {\r\n      //1. validate dữ liệu\r\n      var arrayErrors = [];\r\n      arrayErrors.push(`Bạn có muốn xóa Nhân viên &#60;${this.employeeCodeForDelete}&#62; không ?`);\r\n      //hiển thị thông báo validate không hợp lệ\r\n      let noticeDialog = document.getElementsByClassName(\"d-dialog-box-delete\")[0];\r\n      let bodyTextNoticeDialog = noticeDialog.querySelector(\".d-dialog-box-delete .d-dialog-body\");\r\n      bodyTextNoticeDialog.innerHTML = \"\";\r\n      //append nội dung thông báo\r\n      arrayErrors.forEach((errorMsg) => {\r\n        var el = document.createElement(\"div\");\r\n        el.innerHTML = `${errorMsg}`;\r\n        bodyTextNoticeDialog.append(el);\r\n      });\r\n      document.getElementsByClassName(\"d-dialog-box-delete\")[0].style.display =\r\n        \"block\";\r\n      document.getElementsByClassName(\"d-dialog-box-delete\")[0].style.display =\r\n        \"block\";\r\n      // ẩn form dropdown\r\n      this.$emit(\"isShowDropDown\");\r\n      // document.getElementsByClassName(\"loading\")[0].style.display = \"none\";\r\n    },\r\n\r\n    btnOnReplication() {\r\n      var me = this;\r\n      //ẩn form dialogDelete\r\n      document.getElementsByClassName(\"dropdown\")[0].style.display = \"none\";\r\n      // hiển thị form detail\r\n      me.$emit(\"isShowDialog\");\r\n      // thực hiện lấy mã nhân viên mới\r\n      // me.getNewEmployeeCode();\r\n\r\n    },\r\n\r\n    btnOnStopUsing(){\r\n       let noticeDialog = document.getElementsByClassName(\"d-dialog-box\")[0];\r\n      let bodyTextNoticeDialog = noticeDialog.querySelector(\".d-dialog-body\");\r\n      bodyTextNoticeDialog.innerHTML = \"Chức năng đang phát triển !\";\r\n      // hiển thị form notice\r\n      document.getElementsByClassName(\"d-dialog-box\")[0].style.display =\r\n        \"block\";\r\n      //ẩn form dialogDelete\r\n      document.getElementsByClassName(\"dropdown\")[0].style.display = \"none\";\r\n    },\r\n\r\n     /**\r\n     * Thực hiện lấy mã nhân viên mới\r\n     * Author: HVDUNG (24/06/2022)\r\n     */\r\n    async getNewEmployeeCode() {\r\n      try {\r\n        var me = this;\r\n        // nếu không có id thì gán lại employee là null\r\n        me.employee = {};\r\n        // gọi API lấy mã nhân viên\r\n        await axios\r\n          .get(\"http://localhost:22454/api/v1/Employees/NewEmployeeCode\")\r\n          .then(function (res) {\r\n            me.employee.EmployeeCode = res.data;\r\n            // thực hiện focus vào ô nhập liệu đầu tiên\r\n            document.getElementById(\"EmployeeCode\").focus();\r\n          })\r\n          .catch(function (res) {\r\n            console.log(res);\r\n          });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n     /**\r\n     * Thực hiện format lại ngày tháng để có thể hiển thị được trên form detail\r\n     * Author: HVDUNG (03/06/2022)\r\n     */\r\n    formatDate(dateOfBirth) {\r\n      if (dateOfBirth) {\r\n        // chuyển từ dạng string sang dạng Date\r\n        dateOfBirth = new Date(dateOfBirth);\r\n        // lấy ngày\r\n        let date = dateOfBirth.getDate();\r\n        // lấy tháng\r\n        let month = dateOfBirth.getMonth() + 1;\r\n        // lấy năm\r\n        let year = dateOfBirth.getFullYear();\r\n        // thêm số 0 vào trước nếu chỉ có một kí tự\r\n        date = date < 10 ? `0${date}` : date;\r\n        month = month < 10 ? `0${month}` : month;\r\n        return `${year}-${month}-${date}`;\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import url(\"../../style/css/components/dropdown.css\");\r\n</style>"]},"metadata":{},"sourceType":"module"}